{% extends "navbar.html" %}

{% block styles %}
	{{ super() }}
	<!-- Custom styles for this template -->
	<link href="{{ url_for('static', filename='eggshell.css') }}" rel="stylesheet" type="text/css">

	<!-- Chart.js CDN -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
{% endblock %}

{% block runs_active %}active{% endblock %}

{% block app_content %}
	<br>
	<div class="container text-center" style="padding-top: 0">
		{% for week in weeks %}
			<div class="card-deck">
				<div class="card" style="background-color: #f5f5f5; border-color: #f5f5f5">
					<div class="card-body">
						<h1 class="card-title text-success">
							{{ week.name() }}
						</h1>
						<br>
						<h2 class="card-title">
							{{ "{0:0.1f}".format(week.sum_runs()) }} miles
						</h2>
						<h3 class="card-text text-primary">/{{ "{0:0.1f}".format(week.sum_goals()) }}</h3>
					</div>
				</div>
				<div class="card text-center" style="background-color: #f5f5f5; border-color: #f5f5f5">
					<ul class="list-group list-group-flush border-success">
						<li class="list-group-item" style="background-color: #f5f5f5">{{ week.num_runs() }} run(s)</li>
						<li class="list-group-item" style="background-color: #f5f5f5">
							Increase
						</li>
						<li class="list-group-item" style="background-color: #f5f5f5">Average distance:</li>
						<li class="list-group-item" style="background-color: #f5f5f5">Longest Run:</li>
					</ul>
				</div>
				<div class="card" style="background-color: #f5f5f5; border-color: #f5f5f5">
					<div class="card-body">
						<canvas id="{{ 'chart{}'.format(loop.index0) }}" width="600" height="400"></canvas>
					</div>
				</div>
			</div>
			<hr class="bg-success">
			<!--
			{# for loop #}
				{# if loop.index0 % 4 == 0 #}
				<div class="card-deck">
				{# endif #}
				{# if float(goal.distance) < sum_runs(runs) #}
				<div class="card border-primary">
				{# else #}
				<div class="card border-danger">
				{# endif #}
					<div class="card-body">
						<h2 class="card-title">
							# Miles
						</h2>
						<p class="card-text text-primary">/goal</p>
					</div>
					<div class="card-footer" style="background-color: #f5f5f5">
						<p class="card-text">Date</p>
					</div>
				</div>
				{# if loop.index0 % 4 == 3 #}
				</div>
				<hr class="bg-success">
				{# elif loop.last #}
				{# set remaining = 4 - (loop.length % 4) #}
				{# for i in range(remaining) #}
				<div class="card" style="background-color: #f5f5f5; border-color: #f5f5f5">
				</div>
				{# endfor #}
				</div>
				<hr class="bg-success">
				{# endif #}
			{# endfor #}
			{# if not week #}
				No runs this week
			{# endif #}
		-->
			<!-- add chart scripts -->
			{% with daily_runs = week.daily_distances(), chart_id = 'chart{}'.format(loop.index0) %}
				{% set days = ["Mon", "Tues", "Wed", "Thurs", "Fri", "Sat", "Sun"] %}
				{% include 'runs/scripts/_reports_chart.html' %}
			{% endwith %}
		{% endfor %}
	</div><br>
{% endblock %}